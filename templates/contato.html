{% extends "base.html" %}

{% block title %}Contato - Agronanobio | Or√ßamentos Projeto Bio Aflora{% endblock %}

{% block meta_description %}Entre em contato com a Agronanobio para or√ßamentos do Projeto Bio Aflora, informa√ß√µes sobre erva-mate premium e parcerias sustent√°veis em Mallet-PR.{% endblock %}

{% block meta_keywords %}contato Agronanobio, Projeto Bio Aflora, or√ßamento erva-mate, Mallet Paran√°, URT{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "ContactPage",
    "name": "Contato - Agronanobio",
    "description": "Entre em contato conosco para or√ßamentos do Projeto Bio Aflora",
    "url": "https://bioaflora.com.br/contato",
    "mainEntity": {
        "@type": "Organization",
        "name": "Agronanobio",
        "legalName": "Agronanobio Industria, Comercio, Importa√ß√£o e Exporta√ß√£o Ltda",
        "url": "https://bioaflora.com.br",
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "telephone": "+55-42-99957-5280",
            "email": "contato@bioaflora.com.br",
            "areaServed": "BR",
            "availableLanguage": "Portuguese"
        },
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Vicina 11, Linha Esperan√ßa, 1954, Serra do Tigre",
            "addressLocality": "Distrito de Dorizon",
            "addressRegion": "Paran√°",
            "postalCode": "84570-000",
            "addressCountry": "BR"
        }
    }
}
</script>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumb-section">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('inicio') }}">üè† In√≠cio</a></li>
                <li class="breadcrumb-item active" aria-current="page">üìû Contato</li>
            </ol>
        </nav>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <h1 class="text-center mb-5">Entre em Contato</h1>
            
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h4 class="card-title text-success mb-3">üìç Nossa Localiza√ß√£o</h4>
                            <p class="card-text">
                                <strong>Agronanobio</strong><br>
                                <em>Industria, Comercio, Importa√ß√£o e Exporta√ß√£o Ltda</em><br><br>
                                <strong>Endere√ßo:</strong><br>
                                Vicina 11, Linha Esperan√ßa, 1954<br>
                                Serra do Tigre - Distrito de Dorizon<br>
                                Mallet-PR - CEP: 84.570-000<br><br>
                                <strong>CNPJ:</strong> 11.743.641/0001-52
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h4 class="card-title text-success mb-3">üìû Contatos</h4>
                            <p class="card-text">
                                <strong>Email:</strong> contato@bioaflora.com.br<br>
                                <strong>Fone/WhatsApp:</strong> (42) 99957-5280<br><br>
                                <strong>Projeto:</strong> Bio Aflora<br>
                                <strong>URT:</strong> Unidade de Refer√™ncia Tecnol√≥gica<br>
                                <strong>Foco:</strong> Sistema agroflorestal com erva-mate nativa
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0">üí¨ Envie sua Mensagem</h4>
                </div>
                <div class="card-body">
                    <form method="POST" id="contatoForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="nome" class="form-label">Nome Completo *</label>
                                <input type="text" class="form-control" id="nome" name="nome" 
                                       value="{{ nome or '' }}" required minlength="2">
                                <div class="form-text">M√≠nimo 2 caracteres</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email *</label>
                                <input type="email" class="form-control" id="email" name="email" 
                                       value="{{ email or '' }}" required>
                                <div class="form-text">Formato: exemplo@email.com</div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="assunto" class="form-label">Assunto</label>
                            <select class="form-control" id="assunto" name="assunto">
                                <option value="" {% if not assunto %}selected{% endif %}>Selecione um assunto</option>
                                <option value="produtos" {% if assunto == 'produtos' %}selected{% endif %}>üåø Informa√ß√µes sobre produtos</option>
                                <option value="pedidos" {% if assunto == 'pedidos' %}selected{% endif %}>üõí Pedidos e vendas</option>
                                <option value="sustentabilidade" {% if assunto == 'sustentabilidade' %}selected{% endif %}>üå± Sustentabilidade e URT</option>
                                <option value="parceria" {% if assunto == 'parceria' %}selected{% endif %}>ü§ù Parcerias</option>
                                <option value="outros" {% if assunto == 'outros' %}selected{% endif %}>üí¨ Outros assuntos</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="mensagem" class="form-label">Mensagem *</label>
                            <textarea class="form-control" id="mensagem" name="mensagem" rows="5" 
                                      placeholder="Conte-nos sobre seu interesse no Projeto Bio Aflora, erva-mate sustent√°vel, ou como podemos ajud√°-lo..." 
                                      required minlength="10">{{ mensagem or '' }}</textarea>
                            <div class="form-text">M√≠nimo 10 caracteres</div>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="privacidade" required>
                            <label class="form-check-label" for="privacidade">
                                Concordo em compartilhar meus dados para resposta ao contato *
                            </label>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="btn btn-success btn-lg" id="submitBtn">
                                <span class="submit-text">Enviar Mensagem üìß</span>
                                <span class="submit-loading" style="display: none;">
                                    <span class="spinner-border spinner-border-sm me-2"></span>
                                    Enviando...
                                </span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Interactive Map Section -->
            <div class="card mt-5 border-success">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0">üìç Nossa Localiza√ß√£o</h4>
                </div>
                <div class="card-body p-0">
                    <div id="map" class="interactive-map">
                        <!-- Fallback for when Google Maps is not loaded -->
                        <div class="map-placeholder">
                            <div class="map-placeholder-content">
                                <div class="icon-large text-success mb-3">üìç</div>
                                <h5>Bio Aflora Brasil</h5>
                                <p class="mb-3">Regi√£o Sul do Brasil<br>√Årea de preserva√ß√£o da mata nativa</p>
                                <button class="btn btn-success" onclick="openGoogleMaps()">
                                    üó∫Ô∏è Ver no Google Maps
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-5">
                <div class="col-md-4 text-center mb-3">
                    <div class="icon-circle bg-success text-white mb-2">üïí</div>
                    <h5>Hor√°rio de Atendimento</h5>
                    <p>Segunda a Sexta<br>8h √†s 18h</p>
                </div>
                <div class="col-md-4 text-center mb-3">
                    <div class="icon-circle bg-success text-white mb-2">üì¶</div>
                    <h5>Entregas</h5>
                    <p>Todo o Brasil<br>Parceiros log√≠sticos</p>
                </div>
                <div class="col-md-4 text-center mb-3">
                    <div class="icon-circle bg-success text-white mb-2">üåø</div>
                    <h5>Garantia</h5>
                    <p>Produtos naturais<br>100% sustent√°veis</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Google Maps API (opcional - descomente para usar mapa real) -->
<!--
<script>
function initMap() {
    // Coordenadas da regi√£o Sul do Brasil (exemplo: Curitiba, PR)
    const bioAfloraLocation = { lat: -25.4284, lng: -49.2733 };
    
    const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 12,
        center: bioAfloraLocation,
        styles: [
            {
                featureType: "all",
                elementType: "geometry.fill",
                stylers: [{ color: "#f0f8f0" }]
            },
            {
                featureType: "water",
                elementType: "geometry",
                stylers: [{ color: "#10b981" }]
            }
        ]
    });
    
    const marker = new google.maps.Marker({
        position: bioAfloraLocation,
        map: map,
        title: "Bio Aflora Brasil",
        icon: {
            url: "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24">
                    <path fill="#10b981" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
            `)
        }
    });
    
    const infoWindow = new google.maps.InfoWindow({
        content: `
            <div style="padding: 10px;">
                <h5 style="color: #10b981; margin: 0 0 10px 0;">üåø Agronanobio - Projeto Bio Aflora</h5>
                <p style="margin: 0 0 5px 0;"><strong>Sistema agroflorestal com erva-mate nativa</strong></p>
                <p style="margin: 0 0 5px 0;">üìß contato@bioaflora.com.br</p>
                <p style="margin: 0;">üìû (42) 99957-5280</p>
            </div>
        `
    });
    
    marker.addListener("click", () => {
        infoWindow.open(map, marker);
    });
    
    // Hide placeholder when map loads
    document.querySelector('.map-placeholder').style.display = 'none';
}

// JavaScript para melhorar UX do formul√°rio
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contatoForm');
    const submitBtn = document.getElementById('submitBtn');
    const submitText = submitBtn.querySelector('.submit-text');
    const submitLoading = submitBtn.querySelector('.submit-loading');
    
    // Adicionar evento de submit
    form.addEventListener('submit', function(e) {
        // Mostrar loading
        submitText.style.display = 'none';
        submitLoading.style.display = 'inline-block';
        submitBtn.disabled = true;
        
        // Valida√ß√£o adicional no cliente
        const nome = document.getElementById('nome').value.trim();
        const email = document.getElementById('email').value.trim();
        const mensagem = document.getElementById('mensagem').value.trim();
        const assunto = document.getElementById('assunto').value;
        
        if (nome.length < 2) {
            e.preventDefault();
            alert('Nome deve ter pelo menos 2 caracteres');
            resetButton();
            return false;
        }
        
        if (!isValidEmail(email)) {
            e.preventDefault();
            alert('Por favor, insira um email v√°lido');
            resetButton();
            return false;
        }
        
        if (mensagem.length < 10) {
            e.preventDefault();
            alert('Mensagem deve ter pelo menos 10 caracteres');
            resetButton();
            return false;
        }
        
        // Analytics tracking - Contact form submission
        if (typeof gtag !== 'undefined') {
            gtag('event', 'contact_form_submit', {
                'event_category': 'lead_generation',
                'event_label': assunto || 'no_subject',
                'form_type': 'contact_page'
            });
            
            gtag('event', 'generate_lead', {
                'currency': 'BRL',
                'value': 25.0 // Contact form leads are more valuable
            });
        }
        
        // Track via dataLayer for GTM
        if (typeof dataLayer !== 'undefined') {
            dataLayer.push({
                'event': 'contact_form_submission',
                'form_location': 'contact_page',
                'contact_subject': assunto || 'no_subject',
                'message_length': mensagem.length,
                'user_email_domain': email.split('@')[1]
            });
        }
    });
    
    function resetButton() {
        submitText.style.display = 'inline-block';
        submitLoading.style.display = 'none';
        submitBtn.disabled = false;
    }
    
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
    
    // Auto-resize textarea
    const textarea = document.getElementById('mensagem');
    textarea.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
    });
    
    // Contador de caracteres
    const charCounter = document.createElement('div');
    charCounter.className = 'form-text text-end';
    charCounter.style.fontSize = '12px';
    textarea.parentNode.appendChild(charCounter);
    
    textarea.addEventListener('input', function() {
        const count = this.value.length;
        charCounter.textContent = `${count} caracteres`;
        charCounter.style.color = count < 10 ? '#dc3545' : '#6c757d';
    });
    
    // Trigger inicial
    textarea.dispatchEvent(new Event('input'));
});

window.initMap = initMap;
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>
-->

<script>
function openGoogleMaps() {
    // Coordenadas da regi√£o Sul do Brasil (exemplo)
    const lat = -25.4284;
    const lng = -49.2733;
    const url = `https://www.google.com/maps/search/?api=1&query=${lat},${lng}&query_place_id=Bio+Aflora+Brasil`;
    window.open(url, '_blank');
}
</script>

{% endblock %}